(function() {
  var Game, global, testGo;

  $.noConflict();

  global = window;

  window.jq = jQuery;

  global.deviceWidth = document.documentElement.clientWidth;

  document.documentElement.style.fontSize = (deviceWidth / 10) + "px";

  jq.fn.animationCss = function(animationName, fn) {
    var animationEnd;
    animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
    return this.addClass("animated " + animationName).one(animationEnd, function() {
      jq(this).removeClass("animated " + animationName);
      fn && fn.call(jq(this));
    });
  };

  global.clone = function(obj) {
    var arr, i, item, j, json, key, len, value;
    if (typeof obj !== 'object') {
      return obj;
    } else if (obj instanceof Array) {
      arr = [];
      for (i = j = 0, len = obj.length; j < len; i = ++j) {
        item = obj[i];
        arr[i] = clone(item);
      }
      return arr;
    } else if (obj instanceof Object) {
      json = {};
      for (key in obj) {
        value = obj[key];
        json[key] = clone(obj[key]);
      }
      return json;
    }
  };

  global.Game = Game = (function() {
    function Game() {
      this.rem = deviceWidth / 10;
      this.pHeight = 4540;
      this.wHeight = jq(window).height();
      this.startView = jq('.start-view');
      this.beginning = jq('.start-view .beginning');
      this.backdrop = jq('.backdrop');
      this.btnStart = $('.start-view .btn-start');
      this.countDownNumbers = jq('.start-view .count-down .number');
      this.number = 3;
      this.timer = null;
      this.seats = seatData;
      this.bars = barData;
      this.yellowSeatNum = 5;
      this.people = 22;
      this.seatR = seatData[0].length;
      this.seatC = 2 || seatData.length;
      this.score = 0;
      this.hScore = +localStorage.getItem('hScore') || 0;
      this.cur = 1;
      this.step = -100;
      this.speed = 8000;
      this.m_bgm = $('#m_bgm').get(0);
      this.m_btn = $('#m_btn').get(0);
      this.m_correct = $('#m_correct').get(0);
      this.m_wronge = $('#m_wronge').get(0);
      this.m_countdown = $('#m_countdown').get(0);
      this.m_newrecord = $('#m_newrecord').get(0);
    }

    Game.prototype.init = function() {
      this.getDomReady();
      return this.arrangeBars_Seats();
    };

    Game.prototype.getDomReady = function() {
      jq('.content').height((this.pHeight / 72 * 2) + "rem");
      return $('body').on('touchmove', function(ev) {
        return ev.preventDefault();
      });
    };

    Game.prototype.arrangeBars_Seats = function() {
      var c, colume, column, copyBars, copySeats, j, k, l, len, len1, len2, len3, m, r, row;
      copyBars = clone(barData);
      for (c = j = 0, len = copyBars.length; j < len; c = ++j) {
        colume = copyBars[c];
        for (r = k = 0, len1 = colume.length; k < len1; r = ++k) {
          row = colume[r];
          copyBars[c][r].y += this.pHeight;
        }
      }
      this.bars = this.bars.concat(copyBars);
      copySeats = clone(seatData);
      for (c = l = 0, len2 = copySeats.length; l < len2; c = ++l) {
        column = copySeats[c];
        for (r = m = 0, len3 = column.length; m < len3; r = ++m) {
          row = column[r];
          copySeats[c][r].y += this.pHeight;
        }
      }
      return this.seats = seatData.concat(copySeats);
    };

    return Game;

  })();

  Game.prototype.homePage = function() {
    this.startView.show();
    this.beginning.show();
    this.backdrop.show();
    this.beginning.animationCss('bounceInUp');
    this.homePageBindEvent();
    this.hScore = +localStorage.getItem('hScore') || 0;
    jq('.start-view .history-score').text(this.hScore);
    return jq('.content').css('bottom', 0);
  };

  Game.prototype.homePageBindEvent = function() {
    var _this;
    _this = this;
    this.btnStart.off();
    return this.btnStart.one('tap', function() {
      _this.m_btn.play();
      return _this.beginning.animationCss('bounceOutUp', function() {
        return jq(this).hide(_this.countDown());
      });
    });
  };

  Game.prototype.countDown = function() {
    var _this;
    _this = this;
    this.m_countdown.play();
    this.score = 0;
    $('.score').text(0);
    jq('.content').css('bottom', 0);
    this.countDownNumbers.hide();
    this.startView.show();
    this.backdrop.show();
    this.number--;
    this.timer = setTimeout(function() {
      return _this.countDown.call(_this);
    }, 1000);
    if (this.number < 0) {
      this.number = 3;
      this.startView.hide();
      this.backdrop.hide();
      this.mStart();
      clearTimeout(this.timer);
      return;
    }
    this.countDownNumbers.eq(this.number).show();
  };

  global.game = new Game();

  game.init();

  testGo = function() {
    return setTimeout(function() {
      return game.mStart();
    }, 10);
  };

  game.homePage();

}).call(this);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld3Mvc3RhcnQvc3RhcnQuanMiLCJzb3VyY2VzIjpbInZpZXdzL3N0YXJ0L3N0YXJ0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUE7O0VBQUEsQ0FBQyxDQUFDLFVBQUYsQ0FBQTs7RUFDQSxNQUFBLEdBQVM7O0VBQ1QsTUFBTSxDQUFDLEVBQVAsR0FBWTs7RUFDWixNQUFNLENBQUMsV0FBUCxHQUFxQixRQUFRLENBQUMsZUFBZSxDQUFDOztFQUM5QyxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxRQUEvQixHQUE0QyxDQUFDLFdBQUEsR0FBWSxFQUFiLENBQUEsR0FBZ0I7O0VBQzVELEVBQUUsQ0FBQyxFQUFFLENBQUMsWUFBTixHQUFtQixTQUFDLGFBQUQsRUFBZSxFQUFmO0FBQ2pCLFFBQUE7SUFBQSxZQUFBLEdBQWU7V0FDZixJQUFJLENBQUMsUUFBTCxDQUFjLFdBQUEsR0FBWSxhQUExQixDQUNDLENBQUMsR0FERixDQUNNLFlBRE4sRUFDbUIsU0FBQTtNQUNqQixFQUFBLENBQUcsSUFBSCxDQUFRLENBQUMsV0FBVCxDQUFxQixXQUFBLEdBQVksYUFBakM7TUFDQSxFQUFBLElBQUksRUFBRSxDQUFDLElBQUgsQ0FBUSxFQUFBLENBQUcsSUFBSCxDQUFSO0lBRmEsQ0FEbkI7RUFGaUI7O0VBT25CLE1BQU0sQ0FBQyxLQUFQLEdBQWUsU0FBQyxHQUFEO0FBQ2QsUUFBQTtJQUFBLElBQUcsT0FBTyxHQUFQLEtBQWdCLFFBQW5CO2FBQ0MsSUFERDtLQUFBLE1BRUssSUFBRyxHQUFBLFlBQWUsS0FBbEI7TUFDSixHQUFBLEdBQU07QUFDTixXQUFBLDZDQUFBOztRQUNDLEdBQUksQ0FBQSxDQUFBLENBQUosR0FBUyxLQUFBLENBQU0sSUFBTjtBQURWO2FBRUEsSUFKSTtLQUFBLE1BS0EsSUFBRyxHQUFBLFlBQWUsTUFBbEI7TUFDSixJQUFBLEdBQU87QUFDUCxXQUFBLFVBQUE7O1FBQ0MsSUFBSyxDQUFBLEdBQUEs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SSxDQUFDLE1BQUwsQ0FBQTtJQURVLENBQVgsRUFFQyxFQUZEO0VBRFE7O0VBS1QsSUFBSSxDQUFDLFFBQUwsQ0FBQTtBQW5JQSIsInNvdXJjZXNDb250ZW50IjpbIiQubm9Db25mbGljdCgpXHJcbmdsb2JhbCA9IHdpbmRvd1xyXG53aW5kb3cuanEgPSBqUXVlcnlcclxuZ2xvYmFsLmRldmljZVdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoXHJcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IFwiI3tkZXZpY2VXaWR0aC8xMH1weFwiXHJcbmpxLmZuLmFuaW1hdGlvbkNzcz0oYW5pbWF0aW9uTmFtZSxmbiktPlxyXG5cdFx0YW5pbWF0aW9uRW5kID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnXHJcblx0XHR0aGlzLmFkZENsYXNzIFwiYW5pbWF0ZWQgI3thbmltYXRpb25OYW1lfVwiXHJcblx0XHRcdC5vbmUgYW5pbWF0aW9uRW5kLCgpLT5cclxuXHRcdFx0XHRqcSh0aGlzKS5yZW1vdmVDbGFzcyBcImFuaW1hdGVkICN7YW5pbWF0aW9uTmFtZX1cIlxyXG5cdFx0XHRcdGZuJiZmbi5jYWxsIGpxIHRoaXNcclxuXHRcdFx0XHRyZXR1cm5cclxuZ2xvYmFsLmNsb25lID0gKG9iaiktPlxyXG5cdGlmIHR5cGVvZiBvYmogaXNudCAnb2JqZWN0J1xyXG5cdFx0b2JqXHJcblx0ZWxzZSBpZiBvYmogaW5zdGFuY2VvZiBBcnJheVxyXG5cdFx0YXJyID0gW11cclxuXHRcdGZvciBpdGVtLGkgaW4gb2JqXHJcblx0XHRcdGFycltpXSA9IGNsb25lIGl0ZW1cclxuXHRcdGFyclxyXG5cdGVsc2UgaWYgb2JqIGluc3RhbmNlb2YgT2JqZWN0XHJcblx0XHRqc29uID0ge31cclxuXHRcdGZvciBrZXksdmFsdWUgb2Ygb2JqXHJcblx0XHRcdGpzb25ba2V5XSA9IGNsb25lIG9ialtrZXldXHJcblx0XHRqc29uXHJcblxyXG5nbG9iYWwuR2FtZSA9IGNsYXNzIEdhbWVcclxuXHRjb25zdHJ1Y3RvcjooKS0+XHJcblx0XHRAcmVtID0gZGV2aWNlV2lkdGgvMTBcclxuXHRcdEBwSGVpZ2h0ID0gNDU0MFxyXG5cdFx0QHdIZWlnaHQgPSBqcSh3aW5kb3cpLmhlaWdodCgpIyBzY3JlZW4gaGVpZ2h0XHJcblx0XHRAc3RhcnRWaWV3ID0ganEgJy5zdGFydC12aWV3J1xyXG5cdFx0QGJlZ2lubmluZyA9IGpxICcuc3RhcnQtdmlldyAuYmVnaW5uaW5nJ1xyXG5cdFx0QGJhY2tkcm9wID0ganEgJy5iYWNrZHJvcCdcclxuXHRcdEBidG5TdGFydCA9ICQgJy5zdGFydC12aWV3IC5idG4tc3RhcnQnXHJcblx0XHRAY291bnREb3duTnVtYmVycyA9IGpxICcuc3RhcnQtdmlldyAuY291bnQtZG93biAubnVtYmVyJ1xyXG5cdFx0QG51bWJlciA9IDNcclxuXHRcdEB0aW1lciA9IG51bGxcclxuXHRcdEBzZWF0cyA9IHNlYXREYXRhXHJcblx0XHRAYmFycyA9IGJhckRhdGFcclxuXHRcdEB5ZWxsb3dTZWF0TnVtID0gNVxyXG5cdFx0QHBlb3BsZSA9IDIyXHJcblx0XHRAc2VhdFIgPSBzZWF0RGF0YVswXS5sZW5ndGhcclxuXHRcdEBzZWF0QyA9IDJ8fHNlYXREYXRhLmxlbmd0aFxyXG5cdFx0QHNjb3JlID0gMFxyXG5cdFx0QGhTY29yZSA9ICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaFNjb3JlJykgb3IgMFxyXG5cdFx0QGN1ciA9IDFcclxuXHRcdEBzdGVwID0gLTEwMFxyXG5cdFx0QHNwZWVkID0gODAwMFxyXG5cdFx0QG1fYmdtID0gJCgnI21fYmdtJykuZ2V0KDApXHJcblx0XHRAbV9idG4gPSAkKCcjbV9idG4nKS5nZXQoMClcclxuXHRcdEBtX2NvcnJlY3QgPSAkKCcjbV9jb3JyZWN0JykuZ2V0KDApXHJcblx0XHRAbV93cm9uZ2UgPSAkKCcjbV93cm9uZ2UnKS5nZXQoMClcclxuXHRcdEBtX2NvdW50ZG93biA9ICQoJyNtX2NvdW50ZG93bicpLmdldCgwKVxyXG5cdFx0QG1fbmV3cmVjb3JkID0gJCgnI21fbmV3cmVjb3JkJykuZ2V0KDApXHJcblx0aW5pdDooKS0+XHJcblx0XHRAZ2V0RG9tUmVhZHkoKVxyXG5cdFx0QGFycmFuZ2VCYXJzX1NlYXRzKClcclxuXHRnZXREb21SZWFkeTooKS0+XHJcblx0XHRqcSAnLmNvbnRlbnQnIyBzZXQgY29udGVudCdzIGhlaWdodCBcclxuXHRcdFx0LmhlaWdodCBcIiN7QHBIZWlnaHQvNzIqMn1yZW1cIlxyXG5cdFx0JCAnYm9keSdcclxuXHRcdFx0Lm9uICd0b3VjaG1vdmUnLChldiktPlxyXG5cdFx0XHRcdGV2LnByZXZlbnREZWZhdWx0KClcclxuXHRhcnJhbmdlQmFyc19TZWF0czooKS0+I+WkjeWItuW6p+S9jeWPiuaJtuaJi1xyXG5cdFx0Y29weUJhcnMgPSBjbG9uZSBiYXJEYXRhXHJcblx0XHRmb3IgY29sdW1lLGMgaW4gY29weUJhcnNcclxuXHRcdFx0Zm9yIHJvdyxyIGluIGNvbHVtZVxyXG5cdFx0XHRcdGNvcHlCYXJzW2NdW3JdLnkgKz0gQHBIZWlnaHRcclxuXHRcdEBiYXJzID0gQGJhcnMuY29uY2F0IGNvcHlCYXJzXHJcblx0XHRjb3B5U2VhdHMgPSBjbG9uZSBzZWF0RGF0YVxyXG5cdFx0Zm9yIGNvbHVtbixjIGluIGNvcHlTZWF0c1xyXG5cdFx0XHRmb3Igcm93LHIgaW4gY29sdW1uXHJcblx0XHRcdFx0Y29weVNlYXRzW2NdW3JdLnkgKz0gQHBIZWlnaHRcclxuXHRcdEBzZWF0cyA9IHNlYXREYXRhLmNvbmNhdCBjb3B5U2VhdHMgXHJcblxyXG5HYW1lLnByb3RvdHlwZS5ob21lUGFnZSA9ICgpLT5cclxuXHRAc3RhcnRWaWV3LnNob3coKVxyXG5cdEBiZWdpbm5pbmcuc2hvdygpXHJcblx0QGJhY2tkcm9wLnNob3coKVxyXG5cdEBiZWdpbm5pbmcuYW5pbWF0aW9uQ3NzICdib3VuY2VJblVwJ1xyXG5cdEBob21lUGFnZUJpbmRFdmVudCgpXHJcblx0QGhTY29yZSA9ICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaFNjb3JlJykgb3IgMFxyXG5cdGpxICcuc3RhcnQtdmlldyAuaGlzdG9yeS1zY29yZSdcclxuXHRcdC50ZXh0IEBoU2NvcmVcclxuXHRqcSAnLmNvbnRlbnQnXHJcblx0XHQuY3NzICdib3R0b20nLDBcclxuXHJcbkdhbWUucHJvdG90eXBlLmhvbWVQYWdlQmluZEV2ZW50ID0gKCktPlxyXG5cdF90aGlzID0gQFxyXG5cdEBidG5TdGFydC5vZmYoKVxyXG5cdEBidG5TdGFydC5vbmUgJ3RhcCcsKCktPlxyXG5cdFx0X3RoaXMubV9idG4ucGxheSgpXHJcblx0XHRfdGhpcy5iZWdpbm5pbmcuYW5pbWF0aW9uQ3NzICdib3VuY2VPdXRVcCcsKCktPlxyXG5cdFx0XHRcdGpxKHRoaXMpLmhpZGUgX3RoaXMuY291bnREb3duKCkjc3RhcnQgY291bnQtZG93blxyXG5cclxuR2FtZS5wcm90b3R5cGUuY291bnREb3duID0gKCktPlxyXG5cdF90aGlzID0gQFxyXG5cdEBtX2NvdW50ZG93bi5wbGF5KClcclxuXHRAc2NvcmUgPSAwXHJcblx0JCAnLnNjb3JlJ1xyXG5cdFx0LnRleHQgMFxyXG5cdGpxICcuY29udGVudCdcclxuXHRcdC5jc3MgJ2JvdHRvbScsMFxyXG5cdEBjb3VudERvd25OdW1iZXJzLmhpZGUoKVxyXG5cdEBzdGFydFZpZXcuc2hvdygpXHJcblx0QGJhY2tkcm9wLnNob3coKVxyXG5cdEBudW1iZXItLVxyXG5cdEB0aW1lciA9IHNldFRpbWVvdXQgKCktPlxyXG5cdFx0X3RoaXMuY291bnREb3duLmNhbGwoX3RoaXMpXHJcblx0LDEwMDBcclxuXHRpZiBAbnVtYmVyPDBcclxuXHRcdEBudW1iZXIgPSAzXHJcblx0XHRAc3RhcnRWaWV3LmhpZGUoKVxyXG5cdFx0QGJhY2tkcm9wLmhpZGUoKVxyXG5cdFx0QG1TdGFydCgpXHJcblx0XHQjIHRlc3RHbygpXHJcblx0XHRjbGVhclRpbWVvdXQgQHRpbWVyXHJcblx0XHRyZXR1cm5cclxuXHRAY291bnREb3duTnVtYmVyc1xyXG5cdFx0LmVxIEBudW1iZXJcclxuXHRcdC5zaG93KClcclxuXHRyZXR1cm5cclxuXHJcbmdsb2JhbC5nYW1lID0gbmV3IEdhbWUoKVxyXG5nYW1lLmluaXQoKVxyXG50ZXN0R28gPSAoKS0+XHJcblx0c2V0VGltZW91dCAoKS0+XHJcblx0XHRnYW1lLm1TdGFydCgpXHJcblx0LDEwXHJcbiMgdGVzdEdvKClcclxuZ2FtZS5ob21lUGFnZSgpIl19
